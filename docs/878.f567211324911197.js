"use strict";(self.webpackChunk_1PF_Soto=self.webpackChunk_1PF_Soto||[]).push([[878],{878:(Z,S,a)=>{a.r(S),a.d(S,{StudentsModule:()=>O});var c=a(177),u=a(5743),r=a(9417),m=a(5351),F=a(5177),t=a(7705),h=a(8834),f=a(6467),C=a(9631);function E(e,o){if(1&e&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.JRh(n.getErrorMessage("firstName"))}}function D(e,o){if(1&e&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.JRh(n.getErrorMessage("lastName"))}}function I(e,o){if(1&e&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(1),t.JRh(n.getErrorMessage("mail"))}}let N=(()=>{class e{constructor(n,i,s){this.fb=n,this.matDialogRef=i,this.data=s,this.existingIds=[],this.studentsForm=this.fb.group({firstName:["",[r.k0.required,r.k0.minLength(3),r.k0.maxLength(20),r.k0.pattern(/^[^\d]*$/)]],lastName:["",[r.k0.required,r.k0.minLength(3),r.k0.maxLength(20),r.k0.pattern(/^[^\d]*$/)]],mail:["",[r.k0.required,r.k0.email]]}),this.patchFormValue()}getErrorMessage(n){return F.F.getErrorMessage(this.studentsForm,n)}hasError(n){return F.F.hasError(this.studentsForm,n)}onSave(){this.studentsForm.invalid?this.studentsForm.markAllAsTouched():this.matDialogRef.close({...this.studentsForm.value,id:this.isEditing?this.data.editingStudent.id:this.generateUniqueId(),createdAt:this.isEditing?this.data.editingStudent.createdAt:new Date})}patchFormValue(){this.data?.editingStudent&&this.studentsForm.patchValue(this.data.editingStudent)}generateUniqueId(){let n=Math.floor(9e3*Math.random())+1e3;for(;this.existingIds.includes(n);)n=Math.floor(9e3*Math.random())+1e3;return this.existingIds.push(n),n}get isEditing(){return!!this.data?.editingStudent}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(r.ok),t.rXU(m.CP),t.rXU(m.Vh))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-students-dialog"]],decls:29,vars:5,consts:[[1,"container"],["mat-dialog-title","",1,"text-white"],["mat-dialog-content",""],[3,"formGroup"],[1,"row","g-3"],[1,"col-12","col-md-6"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Tu nombre","formControlName","firstName"],[4,"ngIf"],["matInput","","placeholder","Tu apellido","formControlName","lastName"],[1,"col-12"],["matInput","","placeholder","example@example.com","formControlName","mail"],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close","",1,"mx-3"],["mat-flat-button","","color","primary",3,"click"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2),t.k0s(),t.j41(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t.EFF(9,"Nombre"),t.k0s(),t.nrm(10,"input",7),t.DNE(11,E,2,1,"mat-error",8),t.k0s()(),t.j41(12,"div",5)(13,"mat-form-field",6)(14,"mat-label"),t.EFF(15,"Apellido"),t.k0s(),t.nrm(16,"input",9),t.DNE(17,D,2,1,"mat-error",8),t.k0s()(),t.j41(18,"div",10)(19,"mat-form-field",6)(20,"mat-label"),t.EFF(21,"Mail"),t.k0s(),t.nrm(22,"input",11),t.DNE(23,I,2,1,"mat-error",8),t.k0s()()()()(),t.j41(24,"div",12)(25,"button",13),t.EFF(26,"Cancelar"),t.k0s(),t.j41(27,"button",14),t.bIt("click",function(){return s.onSave()}),t.EFF(28,"Guardar"),t.k0s()()()),2&i&&(t.R7$(2),t.SpI("",null!=s.data&&s.data.editingStudent?"Editando":"Creando"," usuario"),t.R7$(2),t.Y8G("formGroup",s.studentsForm),t.R7$(7),t.Y8G("ngIf",s.hasError("firstName")),t.R7$(6),t.Y8G("ngIf",s.hasError("lastName")),t.R7$(6),t.Y8G("ngIf",s.hasError("mail")))},dependencies:[c.bT,h.$z,f.rl,f.nJ,f.TL,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,C.fg,m.tx,m.BI,m.Yi,m.E7],styles:[".container[_ngcontent-%COMP%]{height:-moz-fit-content!important;height:fit-content!important;width:-moz-fit-content!important;width:fit-content!important;padding:32px}"]})}}return e})();var v=a(600),b=a(9213),d=a(9159),_=a(9183);let k=(()=>{class e{transform(n){return this.capitalize(n.firstName)+" "+this.capitalize(n.lastName)}capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275pipe=t.EJ8({name:"fullName",type:e,pure:!0})}}return e})();function x(e,o){1&e&&t.nrm(0,"mat-spinner")}function T(e,o){1&e&&(t.j41(0,"th",14),t.EFF(1," ID "),t.k0s())}function j(e,o){if(1&e&&(t.j41(0,"td",15),t.EFF(1),t.k0s()),2&e){const n=o.$implicit;t.R7$(1),t.SpI(" ",n.id," ")}}function R(e,o){1&e&&(t.j41(0,"th",14),t.EFF(1," Nombre "),t.k0s())}function $(e,o){if(1&e&&(t.j41(0,"td",15),t.EFF(1),t.nI1(2,"fullName"),t.k0s()),2&e){const n=o.$implicit;t.R7$(1),t.SpI(" ",t.bMT(2,1,n)," ")}}function L(e,o){1&e&&(t.j41(0,"th",14),t.EFF(1," E-Mail "),t.k0s())}function G(e,o){if(1&e&&(t.j41(0,"td",15),t.EFF(1),t.k0s()),2&e){const n=o.$implicit;t.R7$(1),t.SpI(" ",n.mail," ")}}function y(e,o){1&e&&(t.j41(0,"th",14),t.EFF(1," Fecha "),t.k0s())}function M(e,o){if(1&e&&(t.j41(0,"td",15),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const n=o.$implicit;t.R7$(1),t.SpI(" ",t.bMT(2,1,n.createdAt)," ")}}function X(e,o){1&e&&(t.j41(0,"th",14),t.EFF(1," Acciones "),t.k0s())}function U(e,o){if(1&e){const n=t.RV6();t.j41(0,"td",15)(1,"button",16),t.bIt("click",function(){const l=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.onDelete(l.id))}),t.j41(2,"mat-icon"),t.EFF(3,"delete"),t.k0s()(),t.j41(4,"button",16),t.bIt("click",function(){const l=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.openModal(l))}),t.j41(5,"mat-icon"),t.EFF(6,"edit"),t.k0s()(),t.j41(7,"button",16),t.bIt("click",function(){const l=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.goToDetail(l.id))}),t.j41(8,"mat-icon"),t.EFF(9,"info"),t.k0s()()()}}function V(e,o){1&e&&t.nrm(0,"tr",17)}function Y(e,o){1&e&&t.nrm(0,"tr",18)}function B(e,o){if(1&e&&(t.j41(0,"div")(1,"table",4),t.qex(2,5),t.DNE(3,T,2,0,"th",6),t.DNE(4,j,2,1,"td",7),t.bVm(),t.qex(5,8),t.DNE(6,R,2,0,"th",6),t.DNE(7,$,3,3,"td",7),t.bVm(),t.qex(8,9),t.DNE(9,L,2,0,"th",6),t.DNE(10,G,2,1,"td",7),t.bVm(),t.qex(11,10),t.DNE(12,y,2,0,"th",6),t.DNE(13,M,3,3,"td",7),t.bVm(),t.qex(14,11),t.DNE(15,X,2,0,"th",6),t.DNE(16,U,10,0,"td",7),t.bVm(),t.DNE(17,V,1,0,"tr",12),t.DNE(18,Y,1,0,"tr",13),t.k0s()()),2&e){const n=t.XpG();t.R7$(1),t.Y8G("dataSource",n.dataSource),t.R7$(16),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",n.displayedColumns)}}let A=(()=>{class e{constructor(n,i,s,l){this.matDialog=n,this.StudentsService=i,this.router=s,this.activatedRoute=l,this.isLoading=!1,this.displayedColumns=["id","name","mail","date","actions"],this.dataSource=[]}ngOnInit(){this.loadStudents()}loadStudents(){this.isLoading=!0,this.StudentsService.getStudents().subscribe({next:n=>{this.dataSource=n},error:()=>{this.isLoading=!1},complete:()=>{this.isLoading=!1}})}openModal(n){this.matDialog.open(N,{data:{editingStudent:n}}).afterClosed().subscribe({next:i=>{console.log(i),i&&(n?this.handleUpdate(n.id,i):this.StudentsService.addStudent(i).subscribe({next:()=>this.loadStudents()}))}})}handleUpdate(n,i){this.isLoading=!0,this.StudentsService.updateStudentById(n,i).subscribe({next:s=>{this.dataSource=s},error:()=>{this.isLoading=!1},complete:()=>{this.isLoading=!1}})}onDelete(n){this.isLoading=!0,confirm("\xbfEst\xe1 seguro?")&&this.StudentsService.removeStudentById(n).subscribe({next:i=>{this.dataSource=i},error:i=>{console.log(i),this.isLoading=!1},complete:()=>{this.isLoading=!1}})}goToDetail(n){this.router.navigate([n,"detail"],{relativeTo:this.activatedRoute})}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(m.bZ),t.rXU(v.I),t.rXU(u.Ix),t.rXU(u.nX))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-students"]],decls:10,vars:2,consts:[[1,"m-4"],[1,"mb-5"],["mat-fab","","extended","","color","secondary",3,"click"],[4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","mail"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"Lista de alumnos"),t.k0s(),t.j41(3,"div",1)(4,"button",2),t.bIt("click",function(){return s.openModal()}),t.j41(5,"mat-icon"),t.EFF(6,"add"),t.k0s(),t.EFF(7," A\xf1adir estudiante "),t.k0s()(),t.DNE(8,x,1,0,"mat-spinner",3),t.DNE(9,B,19,3,"div",3),t.k0s()),2&i&&(t.R7$(8),t.Y8G("ngIf",s.isLoading),t.R7$(1),t.Y8G("ngIf",!s.isLoading))},dependencies:[c.bT,h.iY,h.Sr,b.An,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,_.LG,c.vh,k]})}}return e})();var g=a(5596);function w(e,o){1&e&&t.nrm(0,"mat-spinner")}function z(e,o){if(1&e&&(t.j41(0,"div")(1,"mat-card")(2,"mat-card-title"),t.EFF(3),t.k0s(),t.j41(4,"mat-card-content"),t.nrm(5,"div"),t.k0s()()()),2&e){const n=t.XpG();t.R7$(3),t.SpI(" Detalles del Alumno ",(null==n.student?null:n.student.firstName)+" "+(null==n.student?null:n.student.lastName)," ")}}const J=[{path:"",component:A},{path:":id/detail",component:(()=>{class e{constructor(n,i){this.studentsService=n,this.activatedRoute=i,this.isLoading=!0}ngOnInit(){this.studentId=Number(this.activatedRoute.snapshot.params.id),console.log(this.studentId),this.studentId&&this.studentsService.getStudentsBy(this.studentId).subscribe({next:n=>{console.log(n),this.isLoading=!1,this.student=n},error:n=>{this.isLoading=!1,console.error(n)}})}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(v.I),t.rXU(u.nX))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-students-detail"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(i,s){1&i&&(t.DNE(0,w,1,0,"mat-spinner",0),t.DNE(1,z,6,1,"div",0)),2&i&&(t.Y8G("ngIf",s.isLoading),t.R7$(1),t.Y8G("ngIf",!s.isLoading))},dependencies:[c.bT,_.LG,g.RN,g.m2,g.dh]})}}return e})()},{path:"**",redirectTo:""}];let P=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(J),u.iI]})}}return e})();var H=a(3887);let O=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[c.MD,P,H.G]})}}return e})()}}]);